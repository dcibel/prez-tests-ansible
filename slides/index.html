<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Développement guidé par les tests de rôles ansible</title>

    <meta name="description" content="En 2016, installer et configurer un serveur ça s'automatise, donc ça se code, donc ça se teste.">
    <meta name="author" content="Pascal Grange - Luc Mazardo">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/theme/default.css" id="theme">
    <link rel="stylesheet" href="css/theme/custom.css" id="custom">
<!--    <link rel="stylesheet" href="css/theme/solarized.css" id="theme"> -->

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
      document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>
<!--      <link rel="stylesheet" href="css/print/pdf.css" type="text/css" media="print">
-->
    <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
  </head>

  <body>

    <div class="reveal">

      <div class="slides">
            <section>
			  <pre> 
   np6         okiwi                   gfi                {epitech}
                         _ _        _                   
              __ _  __ _(_) | ___  | |_ ___  _   _ _ __ 
   Infotel   / _` |/ _` | | |/ _ \ | __/ _ \| | | | '__|
            | (_| | (_| | | |  __/ | || (_) | |_| | |          upwiser
             \__,_|\__, |_|_|\___|  \__\___/ \__,_|_|   
                   |___/                                
           ____                _                         ____   ___  _  __   
          | __ )  ___  _ __ __| | ___  __ _ _   ___  __ |___ \ / _ \/ |/ /_  
          |  _ \ / _ \| '__/ _` |/ _ \/ _` | | | \ \/ /   __) | | | | | '_ \ 
   jet    | |_) | (_) | | | (_| |  __/ (_| | |_| |>  <   / __/| |_| | | (_) |
   brains |____/ \___/|_|  \__,_|\___|\__,_|\__,_/_/\_\ |_____|\___/|_|\___/ 
                                                                               
                   coolworking              neotech
                                            solutions              lectra
   onepoint.
   
   #atbdx
			  </pre>
</section>
<section>
<center>
<img src="run_ansible.svg">
</center>
</section>
<section>
<h3>Développement guidé par les tests de rôles Ansible</h3>

Nous utilisons Ansible pour :
<ul>
<li> automatiser l'installation de nos serveurs
<li> automatiser la maintenance de nos serveurs
<li> 30 rôles Ansible / 200 serveurs / 9 plate-formes
</ul>
<br>
<br>
Le problème : <blockquote>je joue ansible sur la prod, <b>la peur au ventre</b></blockquote>
<br>
Un exemple :<br>
<ul>
<li> en janvier, Luc code le rôle nginx pour la pf A
<li> en mars, Pascal le fait évoluer pour la pf B
<li> en avril, Luc tente de mettre à jour la pf A : <font color="red">FAIL</font>
</ul>

</section>
<section>
<h3>Développement par les tests</h3>

<ul>
<li> créer un seul test unitaire décrivant un aspect du programme
<li> s'assurer, en l'exécutant, que ce test échoue pour les bonnes raisons
<li> écrire juste assez de code, le plus simple possible, pour que ce test passe
<li> remanier le code autant que nécessaire pour se conformer aux critères de simplicité
<li> recommencer, en accumulant les tests au fur et à mesure
</ul>

<p align=right>[<a href="http://institut-agile.fr">http://institut-agile.fr</a>]</p>

</section>

<section>
<h3>Plomberie</h3>
<ul style="list-style: none;">
<li><img src="bash_unit_logo.png" width="60px" style='background:none;border-style:none;margin:none'/> bash unit
<li><img src="docker_logo.svg" width="60px" style='background:none;border-style:none;margin:none'/> Docker
<li><img src="ansible_logo.svg" width="60px" style='background:none;border-style:none;margin:none'/> Ansible
</ul>
<br>
<br>Les tests s'exécutent dans un containeur sur le poste de travail</br>
</section>

<section>
<h3>Démo</h3>
<img src="tdd.gif">
</section>

<section>
<h3>Intégration continue</h3>

<img src="jenkins-medium.png" width=55%%>
</section>

<section>
<h2>Des questions ?</h2>

<p>
<small>
Pascal Grange
&mdash;
Luc Mazardo
</small>
</p>
<p>
<small>
<a href="https://multimediabs.github.io/prez-tests-ansible/slides">
https://multimediabs.github.io/prez-tests-ansible/slides
</a>
</small>
</p>
</section>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>

    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
      controls: true,
      progress: true,
      history: true,
      center: true,

      theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
      transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

      // Optional libraries used to extend on reveal.js
      dependencies: [
      { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
      { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
      { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
      { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
      ]
      });

    </script>

  </body>
</html>

